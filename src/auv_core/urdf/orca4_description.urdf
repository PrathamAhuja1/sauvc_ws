<?xml version='1.0'?>
<robot name="orca4" xmlns:xacro="http://ros.org/wiki/xacro"> <link name="base_link">
      <inertial>
        <origin xyz="0 0 0.011" rpy="0 0 0"/>
        <mass value="12.036"/>
        <inertia ixx="0.0987" ixy="0.0" ixz="0.0" iyy="0.1775" izz="0.2692"/>
      </inertial>
      <visual name="base_link_visual">
         <geometry>
           <mesh filename="package://auv_core/meshes/bluerov2.dae" scale="0.025 0.025 0.025"/>
         </geometry>
      </visual>
      <collision name="base_link_collision">
        <origin xyz="0 0 0.0" rpy="0 0 0"/>
        <geometry>
            <box size="0.46 0.34 0.20"/>
        </geometry>
      </collision>

      <sensor name="imu_sensor" type="imu">
         <always_on>true</always_on>
         <update_rate>100</update_rate>
         <visualize>false</visualize>
         <topic>/imu/data</topic> <imu>
           <angular_velocity>
             <x> <noise type="gaussian"> <mean>0.0</mean> <stddev>0.005</stddev> </noise> </x>
             <y> <noise type="gaussian"> <mean>0.0</mean> <stddev>0.005</stddev> </noise> </y>
             <z> <noise type="gaussian"> <mean>0.0</mean> <stddev>0.005</stddev> </noise> </z>
           </angular_velocity>
           <linear_acceleration>
             <x> <noise type="gaussian"> <mean>0.0</mean> <stddev>0.05</stddev> </noise> </x>
             <y> <noise type="gaussian"> <mean>0.0</mean> <stddev>0.05</stddev> </noise> </y>
             <z> <noise type="gaussian"> <mean>0.0</mean> <stddev>0.05</stddev> </noise> </z>
           </linear_acceleration>
         </imu>
         <plugin filename="gz-sim-imu-system" name="gz::sim::systems::Imu"/>
      </sensor>

      <sensor name='altimeter_sensor' type='altimeter'>
            <always_on>1</always_on>
            <update_rate>10</update_rate>
            <topic>/pressure/altimeter</topic> <altimeter>
              <vertical_position> <noise type='gaussian'> <mean>0.0</mean> <stddev>0.01</stddev> </noise> </vertical_position>
              <vertical_velocity> <noise type='gaussian'> <mean>0.0</mean> <stddev>0.02</stddev> </noise> </vertical_velocity>
            </altimeter>
            <plugin filename="gz-sim-altimeter-system" name="gz::sim::systems::Altimeter"/>
        </sensor>

    </link> <gazebo reference="base_link">
        <plugin filename="gz-sim-hydrodynamics-system" name="gz::sim::systems::Hydrodynamics">
          <link_name>base_link</link_name>
          <water_density>1000</water_density>
          <xDotU>0</xDotU> <yDotV>0</yDotV> <zDotW>0</zDotW>
          <kDotP>0</kDotP> <mDotQ>0</mDotQ> <nDotR>0</nDotR>
          <xU>0</xU> <yV>0</yV> <zW>0</zW>
          <kP>0</kP> <mQ>0</mQ> <nR>0</nR>
          <xUabsU>-33.8</xUabsU> <yVabsV>-54.2</yVabsV> <zWabsW>-73.3</zWabsW>
          <kPabsP>-4.0</kPabsP> <mQabsQ>-4.0</mQabsQ> <nRabsR>-4.0</nRabsR>
        </plugin>

        <plugin filename="gz-sim-odometry-publisher-system" name="gz::sim::systems::OdometryPublisher">
            <odom_publish_frequency>50</odom_publish_frequency> <odom_topic>/model/orca4/odometry</odom_topic> <odom_frame_id>odom</odom_frame_id>
            <odom_child_frame_id>base_link</odom_child_frame_id>
            </plugin>

    </gazebo>


    <link name="thruster1">
      <visual> <origin xyz="0 0 0" rpy="1.5708 0 0"/> <geometry> <mesh filename="package://auv_core/meshes/t200-cw-prop.dae"/> </geometry> </visual>
      <inertial> <mass value="0.002"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
    </link>
    <link name="thruster2">
      <visual> <origin xyz="0 0 0" rpy="1.5708 0 0"/> <geometry> <mesh filename="package://auv_core/meshes/t200-ccw-prop.dae"/> </geometry> </visual>
      <inertial> <mass value="0.002"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
    </link>
    <link name="thruster3">
      <visual> <origin xyz="0 0 0" rpy="-1.5708 0 0"/> <geometry> <mesh filename="package://auv_core/meshes/t200-ccw-prop.dae"/> </geometry> </visual>
      <inertial> <mass value="0.002"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
    </link>
    <link name="thruster4">
       <visual> <origin xyz="0 0 0" rpy="1.5708 0 0"/> <geometry> <mesh filename="package://auv_core/meshes/t200-cw-prop.dae"/> </geometry> </visual>
       <inertial> <mass value="0.002"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
    </link>
    <link name="thruster5">
      <visual> <origin xyz="0 0 0" rpy="-1.5708 0 1.5708"/> <geometry> <mesh filename="package://auv_core/meshes/t200-ccw-prop.dae"/> </geometry> </visual>
      <inertial> <mass value="0.002"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
    </link>
    <link name="thruster6">
      <visual> <origin xyz="0 0 0" rpy="1.5708 0 1.5708"/> <geometry> <mesh filename="package://auv_core/meshes/t200-cw-prop.dae"/> </geometry> </visual>
      <inertial> <mass value="0.002"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
    </link>

    <joint name="thruster1_joint" type="revolute">
      <parent link = "base_link" /> <child link = "thruster1" />
      <origin xyz="0.14 -0.092 0" rpy="-1.5708 1.5708 -0.7854"/>
      <axis xyz = "0 0 1" /> <limit effort="100" velocity="300"/> </joint>
    <joint name="thruster2_joint" type="revolute">
      <parent link = "base_link" /> <child link = "thruster2" />
      <origin xyz="0.14 0.092 0" rpy="-1.5708 1.5708 -2.3562"/>
      <axis xyz = "0 0 1" />
      <limit effort="100" velocity="300"/>
    </joint>
    <joint name="thruster3_joint" type="revolute">
      <parent link = "base_link" /> <child link = "thruster3" />
      <origin xyz="-0.14 -0.092 0" rpy="-1.5708 1.5708 0.7854"/>
      <axis xyz = "0 0 1" />
      <limit effort="100" velocity="300"/>
    </joint>
    <joint name="thruster4_joint" type="revolute">
      <parent link = "base_link" /> <child link = "thruster4" />
      <origin xyz="-0.14 0.092 0" rpy="-1.5708 1.5708 2.3562"/>
      <axis xyz = "0 0 1" />
      <limit effort="100" velocity="300"/>
    </joint>
    <joint name="thruster5_joint" type="revolute">
      <parent link = "base_link" /> <child link = "thruster5" />
      <origin xyz="0 -0.109 0.077" rpy="0 0 0"/>
      <axis xyz = "0 0 1" />
      <limit effort="100" velocity="300"/>
    </joint>
    <joint name="thruster6_joint" type="revolute">
      <parent link = "base_link" /> <child link = "thruster6" />
      <origin xyz="0 0.109 0.077" rpy="0 0 0"/>
      <axis xyz = "0 0 1" />
      <limit effort="100" velocity="300"/>
    </joint>

    <gazebo reference="thruster1_joint">
        <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
          <joint_name>thruster1_joint</joint_name>
          <cmd_topic>/model/orca4/joint/thruster1_joint/cmd_vel</cmd_topic> <thrust_coefficient>0.0002</thrust_coefficient> <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
        </plugin>
     </gazebo>
     <gazebo reference="thruster2_joint">
        <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
          <joint_name>thruster2_joint</joint_name>
          <cmd_topic>/model/orca4/joint/thruster2_joint/cmd_vel</cmd_topic>
          <thrust_coefficient>0.0002</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
        </plugin>
     </gazebo>
    <gazebo reference="thruster3_joint">
        <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
          <joint_name>thruster3_joint</joint_name>
          <cmd_topic>/model/orca4/joint/thruster3_joint/cmd_vel</cmd_topic>
          <thrust_coefficient>-0.0002</thrust_coefficient> <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
        </plugin>
     </gazebo>
    <gazebo reference="thruster4_joint">
        <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
          <joint_name>thruster4_joint</joint_name>
          <cmd_topic>/model/orca4/joint/thruster4_joint/cmd_vel</cmd_topic>
          <thrust_coefficient>-0.0002</thrust_coefficient> <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
        </plugin>
     </gazebo>
     <gazebo reference="thruster5_joint">
        <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
          <joint_name>thruster5_joint</joint_name>
          <cmd_topic>/model/orca4/joint/thruster5_joint/cmd_vel</cmd_topic>
          <thrust_coefficient>0.0002</thrust_coefficient>
          <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
        </plugin>
     </gazebo>
     <gazebo reference="thruster6_joint">
        <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
          <joint_name>thruster6_joint</joint_name>
          <cmd_topic>/model/orca4/joint/thruster6_joint/cmd_vel</cmd_topic>
          <thrust_coefficient>-0.0002</thrust_coefficient> <fluid_density>1000</fluid_density>
          <propeller_diameter>0.1</propeller_diameter>
        </plugin>
     </gazebo>


    <link name="downward_camera_link">
        <inertial> <mass value="0.01"/> <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" /> </inertial>
        <visual> <origin xyz="0 0 0" rpy="0 0 0"/> <geometry> <box size="0.02 0.02 0.02"/> </geometry> </visual>
        <sensor name="downward_camera" type="camera">
              <camera>
                  <horizontal_fov>1.4</horizontal_fov> <image> <width>800</width> <height>600</height> </image>
                  <clip> <near>0.1</near> <far>25</far> </clip> </camera>
              <always_on>1</always_on>
              <update_rate>10</update_rate>
              <visualize>true</visualize>
              <topic>/camera_down/image_raw</topic>
              <info_topic>/camera_down/camera_info</info_topic>
               <plugin filename="gz-sim-camera-system" name="gz::sim::systems::Camera"/>
          </sensor>
    </link>
    <joint name="downward_camera_joint" type="fixed">
        <parent link="base_link"/> <child link="downward_camera_link"/>
        <origin xyz="0.1 0 -0.1" rpy="0 1.5708 0"/> </joint>

    </robot>